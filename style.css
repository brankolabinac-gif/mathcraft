*{box-sizing:border-box}html,body{margin:0;padding:0;height:100%}
:root{
  --bg:#f5f7fb;
  --text:#1a1d21;
  --card:#ffffff;
  --border:#d9dee7;
  --primary:#2563eb;
  --accent:#22a05d;
}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',sans-serif;background:var(--bg);color:var(--text)}
#app{max-width:820px;margin:0 auto;padding:16px}
header{text-align:center;margin:12px 0 8px}
h1{margin:0 0 6px;font-size:30px}
#menu,.card{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.card{background:var(--card);border:1px solid var(--border);padding:12px;border-radius:14px}
label{opacity:.9}
select{background:#fff;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px 12px}
button{padding:14px 18px;border-radius:14px;border:1px solid var(--border);background:var(--card);color:var(--text);cursor:pointer;font-weight:600}
button.primary{background:var(--primary);border-color:var(--primary);color:#fff}
button.ghost{background:transparent}
button:active{transform:translateY(1px)}
.hidden{display:none}

.hud{display:flex;justify-content:space-between;margin:10px 0 14px;background:var(--card);padding:12px;border-radius:12px;border:1px solid var(--border)}

#world{height:320px;background:
  linear-gradient(#cfe9ff,#eaf4ff) no-repeat top/100% 55%,
  #d9f7c7;
padding:8px;border-radius:16px;border:1px solid var(--border);position:relative;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.04)}
.grid{position:absolute;left:0;right:0;bottom:0;display:grid;grid-template-columns:repeat(10,1fr);gap:4px;padding:8px}
.cell{width:100%;aspect-ratio:1/1;border-radius:8px;border:1px solid var(--border);image-rendering:pixelated;display:flex;align-items:center;justify-content:center;font-size:28px;background:#ffffff;color:var(--text)}
.r1 .cell, .r2 .cell{background:#eaf8e4;border-color:#cfe8c3}
.r3 .cell{background:#f3f6fb;border-color:#e0e7f1}
.r4 .cell{background:#e9f9e1;border-color:#cfe8c3}
.cell.progress-on{background:#dfe9ff}
.cell.bottom-on{background:#c9f1d7}

.task{margin:14px 0 10px;font-size:24px;text-align:center}
.answers{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.answers button{font-size:22px;padding:18px;background:#fff;border:1px solid var(--border);border-radius:12px}
footer{opacity:.7;text-align:center;margin-top:16px}

.overlay{position:fixed;inset:0;background:rgba(255,255,255,.97);display:flex;align-items:center;justify-content:center;z-index:9999}
.overlay-content{font-size:22vw;line-height:1;color:#111;animation:pop 700ms ease both}
@keyframes pop{0%{transform:scale(.7);opacity:.3}70%{transform:scale(1.05);opacity:1}100%{transform:scale(1)}}
